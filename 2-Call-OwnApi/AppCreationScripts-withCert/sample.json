{
  "Sample": {
    "Title": "A .NET Core daemon console application calling a custom Web API with its own identity",
    "Level": 200,
    "Client": ".NET Core (Console)",
    "Service": ".NET Core Web API",
    "RepositoryUrl": "active-directory-dotnetcore-daemon-v2",
    "Endpoint": "AAD v2.0"
  },
  "AADApps": [
    {
      "Id": "service",
      "Name": "TodoList-webapi-daemon-v2",
      "Kind": "WebApi",
      "Audience": "AzureADMyOrg",
      "HomePage": "https://localhost:44372",
      "Scopes": [
        "Todo.Read",
        "Todo.Write"
      ],
      "AppRoles": [
        {
          "Types": [
            "Application"
          ],
          "Name": "Todo.ReadWrite.All",
          "Description": "An application permissions that gives you read and write access for all to-do's"
        }
      ],
      "CSharpConfigurations": [
        {
          "AppSettingsJson": {
            "AzureAd": {
              "Instance": "https://login.microsoftonline.com/",
            },
            "RelativePath": "..\\TodoList-WebApi\\"
          }
        }
      ]
    },
    {
      "Id": "client",
      "Name": "daemon-console-v2",
      "Certificate": "CN=daemon-console-v2",
      "Kind": "Daemon",
      "Audience": "AzureADMyOrg",
      "OptionalClaims": {
        "AccessTokenClaims": [
          "idtyp"
        ]
      },
      "UsesROPCOrIWA": false,
      "ReplyUrls": "https://localhost:7238",
      "RequiredResourcesAccess": [
        {
          "Resource": "service",
          "ApplicationPermissions": [
            "Todo.ReadWrite.All"
          ]
        }
      ],
      "ManualSteps": [
        {
          "Comment": "Navigate to the API permissions page and click on 'Grant admin consent for {tenant}'"
        }
      ],
      "CSharpConfigurations": [
        {
          "AppSettingsJson": {
            "AzureAd": {
              "ClientCertificates": [
                {
                  "SourceType": "StoreWithDistinguishedName",
                  "CertificateStorePath": "CurrentUser/My",
                  "CertificateDistinguishedName": "CN=daemon-console-v2"
                }
              ]
            },
            "DownStreamApi": {
              "BaseUrl": "https://localhost:44372/",
              "Scopes": "$serviceIdentifierUri/.default"
            },
            "RelativePath": "..\\daemon-console\\"
          }
        }
      ]
    }
  ],
  "CodeConfiguration": [
    {
      "App": "service",
      "Mappings": [],
      "SettingFile": "\\..\\TodoList-WebApi\\appsettings.json",
      "SettingKind": "JSON"
    },
    {
      "App": "client",
      "Mappings": [],
      "SettingFile": "\\..\\Daemon-Console\\appsettings.json",
      "SettingKind": "JSON"
    }
  ]
}